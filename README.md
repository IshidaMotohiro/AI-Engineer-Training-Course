# 東証銘柄検索アプリ

東京証券取引所に上場されている銘柄を検索できるWebアプリケーションです。

## 機能

- 銘柄名で検索（部分一致）
- 株式コードで検索（完全一致）
- 検索結果の表示項目：
  - コード
  - 銘柄名
  - 市場・商品区分
  - 17業種区分

## セットアップ

### 1. 依存パッケージのインストール

```bash
uv sync
```

### 2. データファイルの配置

`data/data_j.xls` に東証の銘柄データが配置されていることを確認してください。

## 実行方法

### アプリケーションの起動

```bash
uv run python app.py
```

または

```bash
python app.py
```

### アクセス方法

ブラウザで以下のURLにアクセスします：

```
http://localhost:5000
```

または

```
http://127.0.0.1:5000
```

## 使い方

1. ブラウザでアプリケーションにアクセス
2. 検索ボックスに銘柄名またはコードを入力
3. 検索タイプを選択（自動判別、コード、銘柄名）
4. 「検索」ボタンをクリック
5. 検索結果が表示されます

### 検索例

- **コード検索**: `1301` → 極洋
- **銘柄名検索**: `トヨタ` → トヨタ紡織、トヨタ自動車など
- **部分一致検索**: `ソニー` → ソニーグループ、ソニーフィナンシャルグループなど

## API仕様

### POST /api/search

銘柄を検索します。

**リクエストボディ（JSON）:**

```json
{
  "query": "検索キーワード",
  "type": "auto|code|name"
}
```

- `query`: 検索キーワード（必須）
- `type`: 検索タイプ（オプション、デフォルト: auto）
  - `auto`: 自動判別（5文字以下の英数字はコード、それ以外は銘柄名）
  - `code`: コード検索
  - `name`: 銘柄名検索

**レスポンス（JSON）:**

```json
{
  "count": 2,
  "results": [
    {
      "code": "7203",
      "name": "トヨタ自動車",
      "market": "プライム（内国株式）",
      "industry17": "輸送用機器"
    }
  ]
}
```

## 技術スタック

- **バックエンド**: Flask 3.1.2
- **データ処理**: pandas 2.3.3
- **フロントエンド**: HTML, CSS, JavaScript
- **パッケージ管理**: uv

## プロジェクト構成

```
.
├── app.py                 # Flaskアプリケーション
├── templates/
│   └── index.html        # フロントエンドUI
├── data/
│   └── data_j.xls        # 東証銘柄データ
├── pyproject.toml        # プロジェクト設定
└── README.md             # このファイル
```

## デプロイ

このアプリケーションをRender.comに無料でデプロイできます。

### Render.comへのデプロイ手順

1. [Render.com](https://render.com/) にアクセスしてアカウントを作成
2. "New +" ボタンをクリックし、"Web Service" を選択
3. GitHubリポジトリを接続
4. このリポジトリ（AI-Engineer-Training-Course）を選択
5. 以下の設定を入力：
   - **Name**: `tse-stock-search`（任意の名前）
   - **Environment**: `Python`
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `gunicorn app:app --bind 0.0.0.0:$PORT`
   - **Plan**: `Free`
6. "Create Web Service" をクリック

デプロイが完了すると、`https://your-app-name.onrender.com` のようなURLでアクセスできるようになります。

### 注意事項

- 無料プランでは、15分間アクセスがないとスリープ状態になります
- 初回アクセス時は起動に30秒程度かかる場合があります
- データファイル（814KB）も含まれているため、デプロイには数分かかります

## ライセンス

このプロジェクトは個人利用を目的としています。
